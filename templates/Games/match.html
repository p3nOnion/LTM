{% extends "base.html" %}
{% block title %}
    Match
{% endblock title %}
{% block main %}
    {% load crispy_forms_tags %}


    <div class="container h-100 d-inline-block  mx-auto d-flex flex-column justify-content-center align-items-center text-center position-relative"
         data-aos="zoom-out">
    {% if user.is_superuser %}
        <form action="/games/matchs/" method="POST">

            {% csrf_token %}
            {{ form|crispy }}
            <input type="submit" value="submit">
        </form>
    {% endif %}
        <div>
            <select onchange="games(this);" class="form-select" aria-label="Default select example">
                <option selected>Open this select match with author</option>
                {% for game in games %}
                    <option value="{{ game.id }}">{{ game.name }}</option>
                {% endfor %}
            </select>
            <select onchange="changeType(this);" class="form-select" aria-label="Default select example">
                <option selected>Open this select match with status</option>
                <option value="0">Waiting</option>
                <option value="1">Running</option>
                <option value="2">End</option>
            </select>
        </div>
        {#        <div class="w-100 p-3" style="margin-top: 80px">#}
        {#            <!-- Button trigger modal -->#}
        {#            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">#}
        {#                Launch static backdrop modal#}
        {#            </button>#}
        {##}
        {#            <!-- Modal -->#}
        {##}
        {#        </div>#}
        {##}
        {#    </div>#}
        {#    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"#}
        {#         aria-labelledby="staticBackdropLabel" aria-hidden="true">#}
        {#        <div class="modal-dialog">#}
        {#            <div class="modal-content">#}
        {#                <div class="modal-header">#}
        {#                    <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>#}
        {#                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>#}
        {#                </div>#}
        {#                <div class="modal-body">#}
        {##}
        {#                </div>#}
        {#                <div class="modal-footer">#}
        {#                    <form action="/home/" method="get">#}
        {#                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>#}
        {#                        <button type="button" class="btn btn-primary">Understood</button>#}
        {#                    </form>#}
        {#                </div>#}
        {#            </div>#}
        {#        </div>#}
        {#     {% for contact in page_obj %}#}
        {# Each "contact" is a Contact model object. #}
        {#        {{ contact.id|upper }}<br>#}
        {#    {% endfor %}#}
        <div class="most-popular" style="background-color: #bebebf">
            <div class="col-lg-12">
                <div class="row">
                    <div class="heading-section">
                        <h4 style="color: red">Match <em>Now</em></h4>
                    </div>
                    {% for match in page_obj %}
                        <div class="col-lg-4 col-sm-6 " style="min-width: 400px">
                            <div class="item " style="background-color: #344D67">
                                <h5>Match ID: {{ match.id }}</h5>
                                <h4 style="color: #e54d07; text-transform:uppercase">{{ match.game.name }}<br><span>
                                    {% if match.status == 0 %}
                                        waiting
                                    {% elif match.status == 1 %}
                                        running
                                    {% else %}
                                        end
                                    {% endif %}
                                </span></h4>
                                <ul>
                                    <li style="text-align: left;"><i
                                            class="fa " style=" color: red">&nbsp;&nbsp;{{ match.score_play1 }}</i></li>
                                    <li style="text-align: left;"><i class="fa " style=" color: red">
                                        &nbsp;&nbsp;{{ match.score_play2 }}</i>
                                    </li>
                                </ul>
                                <ul>
                                    <li style="text-align: left"><i
                                            class="fa ">UID&nbsp;1&nbsp;: {{ match.id_play1 }}&nbsp;</i></li>
                                    <li style="text-align: left"><i class="fa ">UID
                                        2&nbsp;: {{ match.id_play2 }}&nbsp;</i>
                                    </li>
                                </ul>

                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="pagination" style="margin-bottom: 100px">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1"><i class="pgn__prev-icon icon-angle-left"></i><span
                    class="pgn__prev-txt">First</span> </a>
            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
        </div>
    </div>

    <script>
        function games(obj) {
            location = "/games/matchs/?id=" + obj.value;
        };

        function changeType(obj) {
            location = "/games/matchs/?type=" + obj.value;
        }
    </script>
{% endblock main %}